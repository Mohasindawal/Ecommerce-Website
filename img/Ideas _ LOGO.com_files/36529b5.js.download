(window.webpackJsonp=window.webpackJsonp||[]).push([[9,402],{1163:function(e,t,r){"use strict";var n=r(874),o={components:{Spinner:r.n(n).a},props:{bg:{type:String,default:"white"},isLoading:Boolean}},c=r(8),component=Object(c.a)(o,(function(){var e=this,t=e._self._c;return e.isLoading?t("div",{staticClass:"absolute w-full h-full inset-0 flex items-center justify-center bg-opacity-50 z-1000",class:"bg-".concat(e.bg)},[t("Spinner",{staticClass:"w-8 h-8 fill-current"})],1):e._e()}),[],!1,null,"af34215c",null);t.a=component.exports},1233:function(e,t,r){"use strict";r(157);var n=r(1181),o={components:{InfiniteLoading:r.n(n).a},props:{distance:{type:Number,default:200},identifier:{type:Number,default:+new Date}},data:function(){return{windowWidth:null}},computed:{isMobile:function(){return this.windowWidth<=767}},mounted:function(){this.setWindowWidth(),window.addEventListener("resize",this.setWindowWidth)},beforeDestroy:function(){window.removeEventListener("resize",this.setWindowWidth)},methods:{setWindowWidth:function(){this.windowWidth=window.innerWidth},onInfinite:function(e){this.$emit("infinite",e)}}},c=r(8),component=Object(c.a)(o,(function(){var e=this,t=e._self._c;return t("InfiniteLoading",{key:e.isMobile,attrs:{distance:e.distance,"force-use-infinite-wrapper":e.isMobile,identifier:e.identifier},on:{infinite:e.onInfinite}},[t("div",{attrs:{slot:"no-more"},slot:"no-more"}),e._v(" "),t("div",{attrs:{slot:"no-results"},slot:"no-results"})])}),[],!1,null,null,null);t.a=component.exports},1258:function(e,t,r){"use strict";(function(e){r(16),r(15),r(13),r(17),r(18);var n=r(0),o=r(3),c=(r(19),r(157),r(37),r(113)),l=r(1270),d=r(1164),f=r(323),m=r(28),v=r(307),h=r(14),w=r(1163),y=r(90);r(129);function _(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function k(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}t.a={components:{Watermark:v.a,SpinnerLoader:w.a,Skeleton:c.a},props:{templateId:{type:String,default:null},iconId:{type:String,default:null},palette:{type:Object,default:null},logo:{type:Object,required:!0},shape:{type:String,default:null},updateKey:{type:Number,default:0},disablePreferenceMode:{type:Boolean,default:!0},mainPreview:{type:Boolean,default:!1},enableTextCasing:{type:Boolean,default:!1}},data:function(){return{logo_rendered:!1,render_time:null,logo_input:null,svgjsroot:null,finished_logo:null,background:null,unmounted:!1}},computed:k(k({},Object(m.e)(["editor","session","icons","history"])),Object(m.c)({getBinary:"fonts/getBinary",historyIndex:"history/index"})),watch:{updateKey:function(){this.svgjsroot&&this.logo_rendered&&this.refreshLogo()}},mounted:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.mainPreview&&h.a.$on(h.b.EditorRefreshLogo,e.refreshLogo),r=Object(d.a)(e.getSvgElement()),e.svgjsroot=r,t.next=5,e.createLogo();case 5:case"end":return t.stop()}}),t)})))()},beforeDestroy:function(){this.unmounted=!0,this.mainPreview&&h.a.$off(h.b.EditorRefreshLogo,this.refreshLogo)},methods:{getCanvasElement:function(){return this.$refs.canvas},getSvgElement:function(){return this.$refs.svg},sendRollbar:function(e){this.$rollbar.error("error creating editor logo",{error:e,props:{icon:this.iconId,template:this.templateId,palette:this.palette,logo:this.logo,shape:this.shape},logo_preset:this.editor.logo_preset,session:this.session})},createLogo:function(){var e=arguments,t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=e.length>0&&void 0!==e[0]?e[0]:{},t.logo_rendered=!1,!t.editor.fonts||0!==t.editor.fonts.length){r.next=5;break}return r.next=5,t.$store.dispatch("editor/fetchFonts");case 5:return r.prev=5,r.next=8,t.invokeLogoDesignEngine(t.svgjsroot,n);case 8:r.next=15;break;case 10:r.prev=10,r.t0=r.catch(5),console.log("error creating logo ",r.t0),!t.unmounted&&t.svgjsroot&&t.getCanvasElement()&&t.sendRollbar(r.t0),t.$emit("failed");case 15:return r.prev=15,t.logo_rendered=!0,r.finish(15);case 18:case"end":return r.stop()}}),r,null,[[5,10,15,18]])})))()},refreshLogo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.svgjsroot.first();t&&t.remove(),this.createLogo(e)},emitLogo:function(){if(this.logo_rendered&&this.logo){var e={logo:this.finished_logo,asset_data:{template:this.template}};this.$emit("logoselected",e)}},getFamilyByFontId:function(e){return this.editor.fonts.find((function(t){return t.variant_map.find((function(t){return t.id===e}))}))},getFontFromFamily:function(e,t){return e.variant_map.find((function(e){return e.id===t}))},getFont:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o,data;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n=t.getFamilyByFontId(e))){r.next=5;break}return r.abrupt("return",t.getFontFromFamily(n,e));case 5:return r.next=7,t.$api.get("/api/v3/assets/fonts/".concat(e),{params:{u:0}});case 7:return o=r.sent,data=o.data,r.abrupt("return",data);case 10:case"end":return r.stop()}}),r)})))()},getPalette:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o,data;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if("CUSTOM"!==e&&e){r.next=2;break}return r.abrupt("return",t.editor.logo_preset.palette_hex);case 2:if(!(n=t.editor.palettes.find((function(t){return t.id===e})))){r.next=5;break}return r.abrupt("return",n);case 5:return r.next=7,t.$api.get("/api/v3/assets/palettes/".concat(e));case 7:return o=r.sent,data=o.data,r.abrupt("return",data);case 10:case"end":return r.stop()}}),r)})))()},getIcon:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n=t.icons.icons.find((function(t){return t.id===e})))){r.next=3;break}return r.abrupt("return",n);case 3:return r.abrupt("return",t.$store.dispatch("icons/getIcon",e));case 4:case"end":return r.stop()}}),r)})))()},getTemplate:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var template,n,data;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(template=t.editor.templates.find((function(template){return template.id===e}))){r.next=7;break}return r.next=4,t.$api.get("/api/v3/assets/templates/".concat(e));case 4:return n=r.sent,data=n.data,r.abrupt("return",data);case 7:return r.abrupt("return",template);case 8:case"end":return r.stop()}}),r)})))()},invokeLogoDesignEngine:function(e){var t=arguments,r=this;return Object(n.a)(regeneratorRuntime.mark((function n(){var o,c,d,m,v,h,w,_,k,x,O,j,P,S,template,L,C,F,R,B,$,E,M,I,D,W,T,N,z,J,A,G;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(v=t.length>1&&void 0!==t[1]?t[1]:{},h=r.getCanvasElement(),n.prev=2,h.getContext("2d")){n.next=6;break}throw"Error: Canvas not mounted";case 6:n.next=13;break;case 8:return n.prev=8,n.t0=n.catch(2),console.log("canvas not mounted, cannot proceed"),r.$emit("failed"),n.abrupt("return");case 13:return w=r.editor,_=w.logo_preset.wordmark_fonts,n.next=17,r.getFont(_);case 17:return k=n.sent,n.next=20,r.loadFontBinary(k);case 20:if(x=n.sent,O=w.logo_preset.palettes,null===(o=r.palette)||void 0===o){n.next=26;break}n.t1=o,n.next=29;break;case 26:return n.next=28,r.getPalette(O);case 28:n.t1=n.sent;case 29:return j=n.t1,P=JSON.parse(JSON.stringify(j)),r.background=P.background,S=null!==(c=r.templateId)&&void 0!==c?c:w.logo_preset.templates,n.next=35,r.getTemplate(S);case 35:if(template=n.sent,L={wordmark_fonts:[x],palettes:[P],templates:[template]},!(C=w.logo_preset.slogan_fonts)){n.next=48;break}return n.next=41,r.getFont(C);case 41:return F=n.sent,n.next=44,r.loadFontBinary(F);case 44:R=n.sent,L.slogan_fonts=[R],n.next=53;break;case 48:if(!r.session.slogan){n.next=53;break}return n.next=51,r.loadFontBinary(r.editor.fonts[0].variant_map[0]);case 51:B=n.sent,L.slogan_fonts=[B];case 53:if($=null!==(d=r.iconId)&&void 0!==d?d:w.logo_preset.icons,E={ids:[]},!$){n.next=61;break}return n.next=58,r.getIcon($);case 58:M=n.sent,L.icons=[M],E.ids.push($);case 61:return I=new l.b([template],L),D={amount:1,brand:{wordmark:r.session.wordmark,slogan:r.session.slogan},presets:{templates:{ids:[S]},palettes:{ids:[P.id]},wordmark_fonts:{ids:[_]},slogan_fonts:{ids:[C]},icons:E},style:{enable_text_casing:r.enableTextCasing,disable_preference_mode:r.disablePreferenceMode,icon_orientation:r.disablePreferenceMode?w.icon_orientation:"default",icon_scale:w.icon_scale,slogan_scale:w.slogan_scale,slogan_alignment:r.disablePreferenceMode?w.slogan_alignment:"default",wordmark_alignment:r.disablePreferenceMode?w.wordmark_alignment:"default",slogan_multiline:r.disablePreferenceMode?w.slogan_multiline:"default",slogan_multicolor:r.disablePreferenceMode?w.slogan_multicolor:"default",wordmark_multiline:r.disablePreferenceMode?w.wordmark_multiline:"default",wordmark_multicolor:r.disablePreferenceMode?w.wordmark_multicolor:"default",shape_container:r.disablePreferenceMode?null!==(m=r.shape)&&void 0!==m?m:w.shape:"default",template_alignment:r.disablePreferenceMode?w.template_alignment:"default"},controls:{icon_page:1},inkscape:!1,svgjs:e,canvasdom:h,resources:I},n.next=65,f.logos.create(D);case 65:if(W=n.sent,r.finished_logo=W[0],!r.mainPreview){n.next=77;break}try{Object(y.a)(e)}catch(e){}if(T=r.session,N=T.wordmark,z=T.slogan,J=Object(y.d)(r.finished_logo,N,z),v.disableSetState||(r.$store.commit("history/add",J),r.$store.commit("editor/SET_LOGO",J)),!(A=r.svgjsroot.findOne("#tight-bounds"))){n.next=77;break}return G=A.svg(),n.next=77,r.$store.commit("editor/SET_TIGHT_BOUNDS",G);case 77:case"end":return n.stop()}}),n,null,[[2,8]])})))()},fetchFontBinary:function(t){var r=this;return Object(n.a)(regeneratorRuntime.mark((function n(){var o,c,l,d;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=t.id,c=t.cdn_url,n.prev=1,n.next=4,r.$api.get(c,{responseType:"arraybuffer"});case 4:return l=n.sent,d=e.from(l.data),r.$store.commit("fonts/addFontBinary",{id:o,buffer:d}),n.abrupt("return",k(k({},t),{},{file:d}));case 10:throw n.prev=10,n.t0=n.catch(1),r.$rollbar.error("Failed to fetch font file from cdn",{error:n.t0,cdn_url:c,id:o}),n.t0;case 14:case"end":return n.stop()}}),n,null,[[1,10]])})))()},loadFontBinary:function(t){var r=this;return Object(n.a)(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(o=r.getBinary(t.id))){n.next=5;break}return n.abrupt("return",k(k({},t),{},{file:e.from(o)}));case 5:return n.abrupt("return",r.fetchFontBinary(t));case 6:case"end":return n.stop()}}),n)})))()}}}}).call(this,r(29).Buffer)},1270:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return l}));var n=r(325),o=r(326);function c(e,t){var r={};return r.assets=t,r.templates=e,r.loadAll=function(e){return this.assets},r.load=function(e){return this.templates},r}var l=function(){function e(t,r){Object(n.a)(this,e),this.templates=void 0,this.asssets=void 0,this.templates=t,this.assets=r}return Object(o.a)(e,[{key:"loadAll",value:function(e){return this.assets}},{key:"load",value:function(e){return this.templates}}]),e}()},1302:function(e,t,r){var content=r(1382);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(85).default)("29986289",content,!0,{sourceMap:!1})},1325:function(e,t,r){"use strict";var n=r(1258).a,o=(r(1381),r(8)),component=Object(o.a)(n,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"relative overflow-hidden rounded shadow-lg overlay",on:{click:function(t){return e.emitLogo()}}},[t("canvas",{ref:"canvas",attrs:{width:"1",height:"1"}}),e._v(" "),t("div",{staticClass:"logo-preview w-full"},[t("Transition",[e.mainPreview&&!e.logo_rendered?t("div",{staticClass:"absolute w-full h-full z-1000 p-auto",style:{background:e.background},on:{click:function(t){return e.emitLogo()}}},[t("SpinnerLoader",{attrs:{"is-loading":!0}})],1):e._e()]),e._v(" "),e.logo_rendered?e._e():t("Skeleton",{staticClass:"w-full",style:{"aspect-ratio":"8 / 5"}}),e._v(" "),e.logo_rendered?t("Watermark",{staticClass:"w-full h-full",attrs:{background:e.background}}):e._e(),e._v(" "),t("svg",{ref:"svg",class:e.logo_rendered?"":"absolute invisible",attrs:{xmlns:"http://www.w3.org/2000/svg",version:"1.1","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:svgjs":"http://svgjs.com/svgjs",viewBox:"0 0 640 400"}})],1)])}),[],!1,null,null,null);t.a=component.exports},1381:function(e,t,r){"use strict";r(1302)},1382:function(e,t,r){var n=r(84)((function(i){return i[1]}));n.push([e.i,".logo-preview svg{width:100%;height:auto}.v-enter-active,.v-leave-active{transition:opacity .1s ease}.v-enter-from,.v-leave-to{opacity:0}.preview-svg svg{border-radius:.25rem;width:91.666667%}.logo-element-hover-target{cursor:pointer;stroke-width:2;fill:transparent}.overlay:hover .logo-element-hover-target{--text-opacity:1;color:#d2d6dc;color:rgba(210,214,220,var(--text-opacity));stroke:currentColor;opacity:.25}.logo-element-hover-target:hover{color:var(--color-enterprise-primary,#1890ff)!important;stroke:currentColor!important;opacity:1!important}",""]),n.locals={},e.exports=n},874:function(e,t,r){r(16),r(15),r(13),r(17),r(18);var n=r(35),o=r(36),c=["class","staticClass","style","staticStyle","attrs"];function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}e.exports={functional:!0,render:function(e,t){var r=t._c,data=(t._v,t.data),d=t.children,f=void 0===d?[]:d,m=data.class,v=data.staticClass,style=data.style,h=data.staticStyle,w=data.attrs,y=void 0===w?{}:w,_=o(data,c);return r("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){n(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[m,v],style:[style,h],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",fill:"currentColor",version:"1.0",width:"64",height:"64",viewBox:"0 0 128 128"},y)},_),f.concat([r("g",[r("path",{attrs:{d:"M75.4 126.63a11.43 11.43 0 01-2.1-22.65 40.9 40.9 0 0030.5-30.6 11.4 11.4 0 1122.27 4.87h.02a63.77 63.77 0 01-47.8 48.05v-.02a11.38 11.38 0 01-2.93.37z"}}),r("animateTransform",{attrs:{attributeName:"transform",type:"rotate",from:"0 64 64",to:"360 64 64",dur:"1000ms",repeatCount:"indefinite"}})])]))}}}}]);